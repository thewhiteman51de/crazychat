<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#075E54">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="CrazyChat - Echtzeit Chat Anwendung">
    <title>CrazyChat</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icon-192.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
</head>

<body>
    <!-- Login/Register Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-container">
            <div class="auth-header">
                <div class="auth-logo">
                    <svg viewBox="0 0 303 172" width="80" height="48">
                        <path fill="#EDEDED"
                            d="M229.5 0C262.5 0 289 26.5 289 59.5v53C289 145.5 262.5 172 229.5 172h-156C40.5 172 14 145.5 14 112.5v-53C14 26.5 40.5 0 73.5 0h156z" />
                        <path fill="#25D366"
                            d="M152.5 45.5c-28.7 0-52 23.3-52 52 0 9.2 2.4 17.8 6.6 25.3l-6.9 25.1 25.7-6.7c7.3 4 15.7 6.3 24.6 6.3 28.7 0 52-23.3 52-52s-23.3-52-52-52zm30.4 66.2c-1.3 3.7-7.6 7-10.5 7.4-2.8.4-2.7 2.2-12.7-2.6-10-4.8-16.4-15.6-16.9-16.3-.5-.7-4.1-5.5-4.1-10.4 0-4.9 2.6-7.3 3.5-8.3.9-1 2-1.3 2.7-1.3.7 0 1.3 0 1.9.1.6 0 1.4-.2 2.2 1.7.8 1.9 2.8 6.8 3 7.3.3.5.5 1.1.1 1.7-.4.7-.6 1.1-1.2 1.7-.6.6-1.2 1.4-1.7 1.9-.6.5-1.2 1.1-.5 2.1.7 1 3 4.9 6.4 7.9 4.4 3.8 8.1 5 9.2 5.6 1.1.5 1.8.4 2.4-.3.7-.7 2.8-3.3 3.6-4.4.7-1.1 1.5-1 2.5-.6 1 .4 6.3 3 7.4 3.5 1.1.5 1.8.8 2.1 1.2.3.5.3 2.7-1 5.4z" />
                    </svg>
                </div>
                <h1>CrazyChat</h1>
                <p>Live-Chat mit Echtzeit-Kommunikation</p>
            </div>

            <!-- Login Form -->
            <div class="auth-form" id="loginForm">
                <h2>Anmelden</h2>
                <div class="form-group">
                    <input type="text" id="loginUsername" placeholder="Benutzername" class="auth-input"
                        autocomplete="username">
                </div>
                <div class="form-group">
                    <input type="password" id="loginPassword" placeholder="Passwort" class="auth-input"
                        autocomplete="current-password">
                </div>
                <div class="error-message" id="loginError"></div>
                <button class="auth-btn" id="loginBtn">Anmelden</button>
                <p class="auth-switch">
                    Noch kein Konto? <a href="#" id="showRegister">Registrieren</a>
                </p>
            </div>

            <!-- Register Form -->
            <div class="auth-form hidden" id="registerForm">
                <h2>Registrieren</h2>
                <div class="form-group">
                    <input type="text" id="registerUsername" placeholder="Benutzername" class="auth-input"
                        autocomplete="username">
                </div>
                <div class="form-group">
                    <input type="email" id="registerEmail" placeholder="Email-Adresse" class="auth-input"
                        autocomplete="email">
                </div>
                <div class="form-group">
                    <input type="password" id="registerPassword" placeholder="Passwort (min. 6 Zeichen)"
                        class="auth-input" autocomplete="new-password">
                </div>
                <div class="form-group">
                    <input type="password" id="registerPasswordConfirm" placeholder="Passwort bestÃ¤tigen"
                        class="auth-input" autocomplete="new-password">
                </div>
                <div class="error-message" id="registerError"></div>
                <button class="auth-btn" id="registerBtn">Registrieren</button>
                <p class="auth-switch">
                    Bereits ein Konto? <a href="#" id="showLogin">Anmelden</a>
                </p>
            </div>
        </div>
    </div>

    <div class="app-container" id="appContainer" style="display: none;">
        <!-- Sidebar -->
        <aside class="sidebar">
            <!-- Sidebar Header -->
            <header class="sidebar-header">
                <div class="user-profile">
                    <img src="https://ui-avatars.com/api/?name=You&background=25D366&color=fff&size=40"
                        alt="Your Profile" class="avatar">
                </div>
                <div class="header-actions">
                    <button class="icon-btn" id="statusBtn" title="Status">
                        <svg viewBox="0 0 24 24" width="24" height="24">
                            <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2" />
                            <circle cx="12" cy="12" r="3" fill="currentColor" />
                        </svg>
                    </button>
                    <button class="icon-btn" id="newContactBtn" title="Neuer Kontakt">
                        <svg viewBox="0 0 24 24" width="24" height="24">
                            <path fill="currentColor"
                                d="M15 11h-2V9h-2v2H9v2h2v2h2v-2h2v-2zm0-6.5C15 3.12 13.88 2 12.5 2S10 3.12 10 4.5 11.12 7 12.5 7 15 5.88 15 4.5zM7.5 9C6.12 9 5 10.12 5 11.5S6.12 14 7.5 14 10 12.88 10 11.5 8.88 9 7.5 9zm10 0c-1.38 0-2.5 1.12-2.5 2.5s1.12 2.5 2.5 2.5 2.5-1.12 2.5-2.5-1.12-2.5-2.5-2.5zm-5 7c-2.34 0-7 1.17-7 3.5V22h14v-2.5c0-2.33-4.66-3.5-7-3.5z" />
                        </svg>
                    </button>
                    <button class="icon-btn" id="menuBtn" title="MenÃ¼">
                        <svg viewBox="0 0 24 24" width="24" height="24">
                            <path fill="currentColor"
                                d="M12 7a2 2 0 1 0-.001-4.001A2 2 0 0 0 12 7zm0 2a2 2 0 1 0-.001 3.999A2 2 0 0 0 12 9zm0 6a2 2 0 1 0-.001 3.999A2 2 0 0 0 12 15z" />
                        </svg>
                    </button>
                </div>
            </header>

            <!-- Search Bar -->
            <div class="search-container">
                <div class="search-wrapper">
                    <svg class="search-icon" viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor"
                            d="M15.009 13.805h-.636l-.22-.219a5.184 5.184 0 0 0 1.256-3.386 5.207 5.207 0 1 0-5.207 5.208 5.183 5.183 0 0 0 3.385-1.255l.221.22v.635l4.004 3.999 1.194-1.195-3.997-4.007zm-4.808 0a3.605 3.605 0 1 1 0-7.21 3.605 3.605 0 0 1 0 7.21z" />
                    </svg>
                    <input type="text" id="searchInput" placeholder="Suche oder neuen Chat beginnen"
                        class="search-input">
                </div>
            </div>

            <!-- Chat List -->
            <div class="chat-list" id="chatList">
                <!-- Chat items will be dynamically inserted here -->
            </div>
        </aside>

        <!-- Main Chat Area -->
        <main class="chat-area">
            <!-- Welcome Screen (shown when no chat is selected) -->
            <div class="welcome-screen" id="welcomeScreen">
                <div class="welcome-content">
                    <div class="welcome-icon">
                        <svg viewBox="0 0 303 172" width="360" height="205">
                            <path fill="#EDEDED"
                                d="M229.5 0C262.5 0 289 26.5 289 59.5v53C289 145.5 262.5 172 229.5 172h-156C40.5 172 14 145.5 14 112.5v-53C14 26.5 40.5 0 73.5 0h156z" />
                            <path fill="#25D366"
                                d="M152.5 45.5c-28.7 0-52 23.3-52 52 0 9.2 2.4 17.8 6.6 25.3l-6.9 25.1 25.7-6.7c7.3 4 15.7 6.3 24.6 6.3 28.7 0 52-23.3 52-52s-23.3-52-52-52zm30.4 66.2c-1.3 3.7-7.6 7-10.5 7.4-2.8.4-2.7 2.2-12.7-2.6-10-4.8-16.4-15.6-16.9-16.3-.5-.7-4.1-5.5-4.1-10.4 0-4.9 2.6-7.3 3.5-8.3.9-1 2-1.3 2.7-1.3.7 0 1.3 0 1.9.1.6 0 1.4-.2 2.2 1.7.8 1.9 2.8 6.8 3 7.3.3.5.5 1.1.1 1.7-.4.7-.6 1.1-1.2 1.7-.6.6-1.2 1.4-1.7 1.9-.6.5-1.2 1.1-.5 2.1.7 1 3 4.9 6.4 7.9 4.4 3.8 8.1 5 9.2 5.6 1.1.5 1.8.4 2.4-.3.7-.7 2.8-3.3 3.6-4.4.7-1.1 1.5-1 2.5-.6 1 .4 6.3 3 7.4 3.5 1.1.5 1.8.8 2.1 1.2.3.5.3 2.7-1 5.4z" />
                        </svg>
                    </div>
                    <h1>CrazyChat</h1>
                    <p>Sende und empfange Nachrichten ohne dein Handy online zu halten.</p>
                    <p class="welcome-hint">WÃ¤hle einen Chat aus der Liste oder starte einen neuen Chat.</p>
                </div>
            </div>

            <!-- Chat Screen (shown when a chat is selected) -->
            <div class="chat-screen" id="chatScreen" style="display: none;">
                <!-- Chat Header -->
                <header class="chat-header">
                    <div class="chat-header-info">
                        <div class="chat-header-avatar">
                            <img src="" alt="User" class="avatar" id="chatAvatar">
                        </div>
                        <div class="chat-header-text">
                            <h2 class="chat-header-name" id="chatName">Username</h2>
                            <p class="chat-header-status" id="chatStatus">offline</p>
                        </div>
                    </div>
                    <div class="chat-header-actions">
                        <button class="icon-btn" id="saveContactBtn" style="display: none;" title="Kontakt speichern">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor"
                                    d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z" />
                            </svg>
                        </button>
                        <button class="icon-btn" id="deleteContactBtn" style="display: none;" title="Kontakt lÃ¶schen">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor"
                                    d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" />
                            </svg>
                        </button>
                        <button class="icon-btn" id="blockContactBtn" style="display: none;" title="Blockieren">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor"
                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z" />
                            </svg>
                        </button>
                        <button class="icon-btn" id="searchBtn" title="Nachrichten durchsuchen">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor"
                                    d="M15.009 13.805h-.636l-.22-.219a5.184 5.184 0 0 0 1.256-3.386 5.207 5.207 0 1 0-5.207 5.208 5.183 5.183 0 0 0 3.385-1.255l.221.22v.635l4.004 3.999 1.194-1.195-3.997-4.007zm-4.808 0a3.605 3.605 0 1 1 0-7.21 3.605 3.605 0 0 1 0 7.21z" />
                            </svg>
                        </button>
                        <button class="icon-btn" id="chatMenuBtn" title="MenÃ¼">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor"
                                    d="M12 7a2 2 0 1 0-.001-4.001A2 2 0 0 0 12 7zm0 2a2 2 0 1 0-.001 3.999A2 2 0 0 0 12 9zm0 6a2 2 0 1 0-.001 3.999A2 2 0 0 0 12 15z" />
                            </svg>
                        </button>
                    </div>
                </header>

                <!-- Messages Container -->
                <div class="messages-container" id="messagesContainer">
                    <!-- Messages will be dynamically inserted here -->
                </div>

                <!-- Typing Indicator -->
                <div class="typing-indicator" id="typingIndicator" style="display: none;">
                    <div class="typing-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>

                <!-- Message Input -->
                <footer class="message-input-container">
                    <button class="icon-btn" id="emojiBtn" title="Emoji">
                        <svg viewBox="0 0 24 24" width="24" height="24">
                            <path fill="currentColor"
                                d="M9.153 11.603c.795 0 1.439-.879 1.439-1.962s-.644-1.962-1.439-1.962-1.439.879-1.439 1.962.644 1.962 1.439 1.962zm-3.204 1.362c-.026-.307-.131 5.218 6.063 5.551 6.066-.25 6.066-5.551 6.066-5.551-6.078 1.416-12.129 0-12.129 0zm11.363 1.108s-.669 1.959-5.051 1.959c-3.505 0-5.388-1.164-5.607-1.959 0 0 5.912 1.055 10.658 0zM11.804 1.011C5.609 1.011.978 6.033.978 12.228s4.826 10.761 11.021 10.761S23.02 18.423 23.02 12.228c.001-6.195-5.021-11.217-11.216-11.217zM12 21.354c-5.273 0-9.381-3.886-9.381-9.159s3.942-9.548 9.215-9.548 9.548 4.275 9.548 9.548c-.001 5.272-4.109 9.159-9.382 9.159zm3.108-9.751c.795 0 1.439-.879 1.439-1.962s-.644-1.962-1.439-1.962-1.439.879-1.439 1.962.644 1.962 1.439 1.962z" />
                        </svg>
                    </button>
                    <button class="icon-btn" id="attachBtn" title="Anhang">
                        <svg viewBox="0 0 24 24" width="24" height="24">
                            <path fill="currentColor"
                                d="M1.816 15.556v.002c0 1.502.584 2.912 1.646 3.972s2.472 1.647 3.974 1.647a5.58 5.58 0 0 0 3.972-1.645l9.547-9.548c.769-.768 1.147-1.767 1.058-2.817-.079-.968-.548-1.927-1.319-2.698-1.594-1.592-4.068-1.711-5.517-.262l-7.916 7.915c-.881.881-.792 2.25.214 3.261.959.958 2.423 1.053 3.263.215l5.511-5.512c.28-.28.267-.722.053-.936l-.244-.244c-.191-.191-.567-.349-.957.04l-5.506 5.506c-.18.18-.635.127-.976-.214-.098-.097-.576-.613-.213-.973l7.915-7.917c.818-.817 2.267-.699 3.23.262.5.501.802 1.1.849 1.685.051.573-.156 1.111-.589 1.543l-9.547 9.549a3.97 3.97 0 0 1-2.829 1.171 3.975 3.975 0 0 1-2.83-1.173 3.973 3.973 0 0 1-1.172-2.828c0-1.071.415-2.076 1.172-2.83l7.209-7.211c.157-.157.264-.579.028-.814L11.5 4.36a.572.572 0 0 0-.834.018l-7.205 7.207a5.577 5.577 0 0 0-1.645 3.971z" />
                        </svg>
                    </button>
                    <div class="message-input-wrapper">
                        <input type="text" id="messageInput" placeholder="Nachricht eingeben" class="message-input">
                    </div>
                    <button class="icon-btn send-btn" id="sendBtn" title="Senden">
                        <svg viewBox="0 0 24 24" width="24" height="24">
                            <path fill="currentColor"
                                d="M1.101 21.757L23.8 12.028 1.101 2.3l.011 7.912 13.623 1.816-13.623 1.817-.011 7.912z" />
                        </svg>
                    </button>
                </footer>
            </div>
        </main>
    </div>

    <!-- Add Contact Modal -->
    <div class="contact-modal" id="contactModal" style="display: none;">
        <div class="contact-modal-content">
            <div class="contact-modal-header">
                <h2>Neuer Kontakt</h2>
                <button class="close-btn" id="closeContactModal">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor"
                            d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                    </svg>
                </button>
            </div>
            <div class="contact-modal-body">
                <p class="contact-hint">Gib die Email-Adresse des Benutzers ein, den du hinzufÃ¼gen mÃ¶chtest.</p>
                <div class="form-group">
                    <input type="email" id="contactEmail" placeholder="Email-Adresse" class="contact-input">
                </div>
                <div class="form-group">
                    <input type="text" id="contactName" placeholder="Name (optional)" class="contact-input">
                </div>
                <div class="error-message" id="contactError"></div>
                <button class="contact-btn" id="addContactBtn">Kontakt hinzufÃ¼gen</button>
            </div>
        </div>
    </div>

    <!-- Message Context Menu -->
    <div class="message-context-menu" id="messageContextMenu" style="display: none;">
        <button class="context-menu-item" id="editMessageBtn">
            <svg viewBox="0 0 24 24" width="18" height="18">
                <path fill="currentColor"
                    d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" />
            </svg>
            Bearbeiten
        </button>
        <button class="context-menu-item" id="deleteForMeBtn">
            <svg viewBox="0 0 24 24" width="18" height="18">
                <path fill="currentColor"
                    d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" />
            </svg>
            FÃ¼r mich lÃ¶schen
        </button>
        <button class="context-menu-item" id="deleteForEveryoneBtn">
            <svg viewBox="0 0 24 24" width="18" height="18">
                <path fill="currentColor"
                    d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" />
            </svg>
            FÃ¼r alle lÃ¶schen
        </button>
    </div>

    <!-- Emoji Picker (Simple) -->
    <div class="emoji-picker" id="emojiPicker" style="display: none;">
        <div class="emoji-grid">
            ğŸ˜€ ğŸ˜ƒ ğŸ˜„ ğŸ˜ ğŸ˜† ğŸ˜… ğŸ¤£ ğŸ˜‚ ğŸ™‚ ğŸ™ƒ ğŸ˜‰ ğŸ˜Š ğŸ˜‡ ğŸ¥° ğŸ˜ ğŸ¤© ğŸ˜˜ ğŸ˜— ğŸ˜š ğŸ˜™
            ğŸ¥² ğŸ˜‹ ğŸ˜› ğŸ˜œ ğŸ¤ª ğŸ˜ ğŸ¤‘ ğŸ¤— ğŸ¤­ ğŸ¤« ğŸ¤” ğŸ¤ ğŸ¤¨ ğŸ˜ ğŸ˜‘ ğŸ˜¶ ğŸ˜ ğŸ˜’ ğŸ™„ ğŸ˜¬
            ğŸ¤¥ ğŸ˜Œ ğŸ˜” ğŸ˜ª ğŸ¤¤ ğŸ˜´ ğŸ˜· ğŸ¤’ ğŸ¤• ğŸ¤¢ ğŸ¤® ğŸ¤§ ğŸ¥µ ğŸ¥¶ ğŸ¥´ ğŸ˜µ ğŸ¤¯ ğŸ¤  ğŸ¥³ ğŸ¥¸
            ğŸ˜ ğŸ¤“ ğŸ§ ğŸ˜• ğŸ˜Ÿ ğŸ™ â˜¹ï¸ ğŸ˜® ğŸ˜¯ ğŸ˜² ğŸ˜³ ğŸ¥º ğŸ˜¦ ğŸ˜§ ğŸ˜¨ ğŸ˜° ğŸ˜¥ ğŸ˜¢ ğŸ˜­ ğŸ˜±
            ğŸ˜– ğŸ˜£ ğŸ˜ ğŸ˜“ ğŸ˜© ğŸ˜« ğŸ¥± ğŸ˜¤ ğŸ˜¡ ğŸ˜  ğŸ¤¬ ğŸ‘ ğŸ‘ ğŸ‘Œ âœŒï¸ ğŸ¤ ğŸ¤Ÿ ğŸ¤˜ ğŸ¤™ ğŸ‘ˆ
            ğŸ‘‰ ğŸ‘† ğŸ‘‡ â˜ï¸ âœ‹ ğŸ¤š ğŸ– ğŸ–– ğŸ‘‹ ğŸ¤™ ğŸ’ª ğŸ¦¾ ğŸ™ âœï¸ ğŸ’… ğŸ¤³ ğŸ’ƒ ğŸ•º ğŸ‰ ğŸŠ
        </div>
    </div>

    <!-- Custom Confirm Modal -->
    <div class="custom-modal" id="customConfirmModal" style="display: none;">
        <div class="custom-modal-content">
            <div class="custom-modal-header">
                <h3 id="confirmTitle">BestÃ¤tigen</h3>
            </div>
            <div class="custom-modal-body">
                <p id="confirmMessage"></p>
            </div>
            <div class="custom-modal-footer">
                <button class="modal-btn modal-btn-secondary" id="confirmCancelBtn">Abbrechen</button>
                <button class="modal-btn modal-btn-primary" id="confirmOkBtn">OK</button>
            </div>
        </div>
    </div>

    <!-- Custom Prompt Modal -->
    <div class="custom-modal" id="customPromptModal" style="display: none;">
        <div class="custom-modal-content">
            <div class="custom-modal-header">
                <h3 id="promptTitle">Eingabe</h3>
            </div>
            <div class="custom-modal-body">
                <p id="promptMessage"></p>
                <input type="text" id="promptInput" class="modal-input">
            </div>
            <div class="custom-modal-footer">
                <button class="modal-btn modal-btn-secondary" id="promptCancelBtn">Abbrechen</button>
                <button class="modal-btn modal-btn-primary" id="promptOkBtn">OK</button>
            </div>
        </div>
    </div>

    <!-- Custom Alert Modal -->
    <div class="custom-modal" id="customAlertModal" style="display: none;">
        <div class="custom-modal-content">
            <div class="custom-modal-header">
                <h3 id="alertTitle">Hinweis</h3>
            </div>
            <div class="custom-modal-body">
                <p id="alertMessage"></p>
            </div>
            <div class="custom-modal-footer">
                <button class="modal-btn modal-btn-primary" id="alertOkBtn">OK</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>